<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comilank ‚Äî –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–Ω—ã–π</title>
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Google Fonts Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body { background:#0c0c0c; color:#f0f0f0; font-family:'Inter',sans-serif; min-height:100vh; display:flex; justify-content:center; align-items:center; padding:20px; overflow-x:hidden; position:relative; }
        .container { max-width:1200px; width:100%; background:#121212; border-radius:48px; padding:48px; box-shadow:0 25px 50px -8px rgba(255,102,0,0.25); border:1px solid #2a2a2a; position:relative; z-index:10; backdrop-filter:blur(4px); }

        .fullscreen-btn { position:absolute; top:24px; right:24px; background:linear-gradient(145deg,#ff6600,#cc5200); border:none; color:white; font-size:24px; width:54px; height:54px; border-radius:30px; cursor:pointer; display:flex; align-items:center; justify-content:center; transition:0.4s; box-shadow:0 0 20px #ff6600,0 4px 15px rgba(0,0,0,0.5); z-index:100; }
        .fullscreen-btn:hover { transform:scale(1.15) rotate(180deg); background:linear-gradient(145deg,#ff8533,#ff6600); box-shadow:0 0 40px #ff6600; }
        .fullscreen-btn i { filter:drop-shadow(0 2px 4px rgba(0,0,0,0.5)); }

        .floating-icons { position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:1; }
        .icon { position:absolute; font-size:32px; opacity:0.12; transition:all 0.5s cubic-bezier(0.25,0.1,0.2,1.5); pointer-events:auto; cursor:pointer; color:#aaa; animation:float 12s infinite alternate ease-in-out; }
        .icon:hover { opacity:1; color:#ff6600; text-shadow:0 0 30px #ff6600; transform:scale(1.6) rotate(15deg); }
        @keyframes float { 0%{transform:translateY(0px) rotate(0deg);} 100%{transform:translateY(-40px) rotate(12deg);} }
        .icon1 { top:5%; left:2%; animation-duration:11s; } .icon2 { top:12%; right:4%; animation-duration:13s; } .icon3 { bottom:8%; left:5%; animation-duration:9s; } .icon4 { bottom:18%; right:7%; animation-duration:14s; } .icon5 { top:25%; left:10%; animation-duration:10s; } .icon6 { top:35%; right:11%; animation-duration:12s; } .icon7 { bottom:25%; left:13%; animation-duration:8s; } .icon8 { bottom:35%; right:14%; animation-duration:15s; } .icon9 { top:45%; left:18%; animation-duration:9.5s; } .icon10 { top:55%; right:18%; animation-duration:11.5s; } .icon11 { bottom:45%; left:20%; animation-duration:10.5s; } .icon12 { bottom:55%; right:22%; animation-duration:13.5s; } .icon13 { top:8%; left:25%; animation-duration:12.5s; } .icon14 { top:18%; right:25%; animation-duration:8.5s; } .icon15 { bottom:12%; left:28%; animation-duration:14.5s; } .icon16 { bottom:22%; right:28%; animation-duration:9.2s; } .icon17 { top:65%; left:30%; animation-duration:11.2s; } .icon18 { top:75%; right:30%; animation-duration:10.2s; }

        .header { display:flex; align-items:center; gap:32px; margin-bottom:40px; flex-wrap:wrap; }
        .avatar { width:110px; height:110px; border-radius:50%; object-fit:cover; border:3px solid #ff6600; box-shadow:0 0 20px rgba(255,102,0,0.5); transition:box-shadow 0.3s,transform 0.3s; flex-shrink:0; }
        .avatar:hover { transform:scale(1.03); box-shadow:0 0 40px #ff6600,0 0 80px #ff6600; }
        .title { flex:1; }
        .title h1 { font-size:3.2rem; font-weight:600; color:#fff; letter-spacing:1px; }
        .title h1 span { transition:color 0.2s,text-shadow 0.2s; cursor:default; }
        .title h1 span:hover { color:#ff6600; text-shadow:0 0 10px #ff6600; }
        .title p { color:#aaa; font-size:1.2rem; margin-top:6px; }
        .title p span { transition:color 0.2s,text-shadow 0.2s; }
        .title p span:hover { color:#ff6600; text-shadow:0 0 8px #ff6600; }

        .live-indicator { display:inline-flex; align-items:center; font-weight:600; padding:6px 14px; border-radius:40px; transition:0.3s; flex-shrink:0; }
        .live-indicator.live-on { background:#ff6600; color:#121212; box-shadow:0 0 20px #ff6600; }
        .live-indicator.live-off { background:#555; color:#ccc; box-shadow:0 0 15px #555; }
        .live-dot { width:10px; height:10px; background:currentColor; border-radius:50%; margin-right:8px; animation:pulse 1.4s infinite; }
        .live-indicator.live-off .live-dot { animation:none; }
        @keyframes pulse { 0%{opacity:1; transform:scale(1);} 50%{opacity:0.5; transform:scale(1.3);} 100%{opacity:1; transform:scale(1);} }

        .tabs { display:flex; gap:8px; margin-bottom:36px; border-bottom:1px solid #2a2a2a; padding-bottom:12px; flex-wrap:wrap; }
        .tab-button { background:transparent; border:none; color:#aaa; font-size:1.2rem; padding:10px 24px; cursor:pointer; border-radius:40px; font-weight:500; transition:0.2s; }
        .tab-button:hover { color:#ff6600; background:#1f1f1f; }
        .tab-button.active { color:#ff6600; background:#1a1a1a; font-weight:600; }
        .tab-content { display:none; animation:fadeIn 0.4s ease; }
        .tab-content.active { display:block; }
        @keyframes fadeIn { from{opacity:0; transform:translateY(8px);} to{opacity:1; transform:translateY(0);} }

        .viewer-counter { font-size:1.8rem; font-weight:500; color:#ff6600; margin:30px 0 20px; text-align:center; background:#1e1e1e; padding:20px; border-radius:60px; border:1px solid #ff6600; box-shadow:inset 0 0 15px rgba(255,102,0,0.2); }
        .stream-timer { background:#1a1a1a; border-radius:40px; padding:20px; margin:20px 0; text-align:center; border:1px solid #ff6600; font-size:1.5rem; color:#ffaa33; box-shadow:0 0 15px rgba(255,102,0,0.2); }
        .stream-timer span { font-weight:700; color:#ff6600; }

        /* –ë–∞—Ä–∞–±–∞–Ω */
        .spinning-reel { width:100%; max-width:420px; height:210px; margin:30px auto; overflow:hidden; border:2px solid #ff6600; border-radius:30px; background:#1a1a1a; box-shadow:0 0 30px rgba(255,102,0,0.5); position:relative; }
        .reel-track { display:flex; flex-direction:column; transform:translate3d(0,0,0); backface-visibility:hidden; perspective:1000px; will-change:transform; background:#1a1a1a; }
        .reel-item { height:70px; line-height:70px; padding:0 25px; color:white; font-weight:500; font-size:1.2rem; text-align:center; border-bottom:1px solid #ff6600; background:rgba(255,102,0,0.1); white-space:nowrap; text-shadow:0 0 8px rgba(255,102,0,0.7); transition:all 0.3s ease; }
        .reel-item.selected { 
            background:#ff6600; 
            color:#121212; 
            text-shadow:0 0 20px #ffaa33, 0 0 40px #ff6600; 
            box-shadow:0 0 30px #ff6600, inset 0 0 10px rgba(0,0,0,0.5); 
            transform:scale(1.02); 
            border-color:#fff; 
            animation:burst 0.6s ease-out; 
        }
        @keyframes burst {
            0% { box-shadow:0 0 0 #ff6600, inset 0 0 0 rgba(0,0,0,0); }
            30% { box-shadow:0 0 50px #ff6600, inset 0 0 20px #000; }
            100% { box-shadow:0 0 30px #ff6600, inset 0 0 10px rgba(0,0,0,0.5); }
        }
        .reel-item:last-child { border-bottom:none; }
        @keyframes spinDown {
            0% { transform: translateY(0); }
            100% { transform: translateY(-3360px); } /* 48 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ * 70px */
        }
        .reel-control { text-align:center; margin:20px 0 10px; }
        .reel-btn { background:#ff6600; border:none; color:#121212; padding:14px 36px; border-radius:60px; cursor:pointer; font-weight:700; font-size:1.4rem; box-shadow:0 8px 0 #b34700; transform:translateY(0); transition:0.1s; }
        .reel-btn:active { transform:translateY(5px); box-shadow:0 3px 0 #b34700; }
        .reel-btn:disabled { background:#555; box-shadow:0 5px 0 #333; transform:translateY(3px); pointer-events:none; color:#aaa; }

        /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤—ã–±–æ—Ä–∞ (—Å—Ç—Ä–µ–ª–∫–∞) */
        .reel-indicator {
            position: absolute;
            left: -25px;
            top: 50%;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-top: 12px solid transparent;
            border-bottom: 12px solid transparent;
            border-right: 20px solid #ff6600;
            filter: drop-shadow(0 0 8px #ff6600);
            z-index: 20;
            pointer-events: none;
        }

        /* –ë–ª–æ–∫ —É–≥–∞–¥—ã–≤–∞–Ω–∏—è (–∫–Ω–æ–ø–∫–∏ –∏–≥—Ä) */
        .guess-section {
            margin-top: 30px;
            text-align: center;
        }
        .guess-title {
            font-size: 1.2rem;
            color: #ffaa33;
            margin-bottom: 15px;
        }
        .guess-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }
        .guess-btn {
            background: #2a2a2a;
            border: 1px solid #ff6600;
            color: #fff;
            padding: 8px 16px;
            border-radius: 30px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 0 5px rgba(255,102,0,0.3);
        }
        .guess-btn:hover {
            background: #ff6600;
            color: #121212;
            transform: scale(1.05);
            box-shadow: 0 0 15px #ff6600;
        }
        .guess-btn.selected {
            background: #ff6600;
            color: #121212;
            box-shadow: 0 0 20px #ff6600;
            border-color: #fff;
        }

        /* –û–≤–µ—Ä–ª–µ–π —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ */
        .congrats-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 30000;
            backdrop-filter: blur(8px);
            animation: congratsFadeIn 0.3s ease-out;
        }
        .congrats-canvas {
            width: 400px;
            height: 400px;
            display: block;
            border-radius: 30px;
            box-shadow: 0 0 50px #ff6600;
            margin-bottom: 30px;
        }
        .congrats-text {
            color: #ff6600;
            font-size: 2rem;
            font-weight: bold;
            text-align: center;
            text-shadow: 0 0 20px #ff6600;
            animation: textGlow 1s infinite alternate;
        }
        @keyframes congratsFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes textGlow {
            from { text-shadow: 0 0 10px #ff6600; }
            to { text-shadow: 0 0 30px #ff6600; }
        }

        .weather-container { display:grid; grid-template-columns:repeat(auto-fill,minmax(180px,1fr)); gap:20px; margin-top:30px; }
        .weather-card { background:#1e1e1e; border-radius:30px; padding:20px; text-align:center; border:1px solid #ff6600; box-shadow:0 0 20px rgba(255,102,0,0.3); transition:all 0.3s; cursor:pointer; position:relative; overflow:hidden; }
        .weather-card::before { content:''; position:absolute; top:-2px; left:-2px; right:-2px; bottom:-2px; background:linear-gradient(45deg,#ff6600,transparent); opacity:0; transition:opacity 0.3s; z-index:-1; border-radius:32px; }
        .weather-card:hover { transform:scale(1.03); box-shadow:0 0 40px #ff6600; }
        .weather-card:hover::before { opacity:0.3; }
        .weather-city { font-size:1.5rem; font-weight:600; color:#ff6600; margin-bottom:5px; }
        .weather-time { font-size:0.9rem; color:#aaa; margin-bottom:10px; }
        .weather-icon { font-size:3rem; margin:10px 0; filter:drop-shadow(0 0 10px #ff6600); }
        .weather-temp { font-size:2rem; font-weight:500; }
        .weather-desc { font-size:0.9rem; color:#ccc; margin-top:5px; }

        .donate-container { display:flex; flex-direction:column; align-items:center; gap:40px; margin-top:30px; }
        .donate-links { display:flex; gap:40px; flex-wrap:wrap; justify-content:center; }
        .donate-card { background:#1a1a1a; border:2px solid #ff6600; border-radius:40px; padding:30px 40px; text-align:center; transition:0.3s; box-shadow:0 0 30px rgba(255,102,0,0.5); min-width:250px; }
        .donate-card:hover { transform:scale(1.05) translateY(-5px); box-shadow:0 0 60px #ff6600; }
        .donate-card a { color:#ff6600; font-size:1.5rem; font-weight:600; text-decoration:none; display:block; margin:15px 0 5px; }
        .donate-card a:hover { text-decoration:underline; color:#ffaa33; }
        .donate-card i { font-size:4rem; color:#ff6600; filter:drop-shadow(0 0 15px #ff6600); }
        .donate-desc { color:#ccc; font-size:1rem; margin-top:10px; }

        .game-container { background:#1a1a1a; border-radius:60px; padding:30px; border:1px solid #ff6600; text-align:center; width:100%; box-shadow:0 0 30px rgba(255,102,0,0.3); }
        .game-title { font-size:2rem; color:#ff6600; margin-bottom:20px; }
        .burj { width:80px; margin:20px auto; transition:transform 0.2s,filter 0.2s; cursor:pointer; filter:drop-shadow(0 0 10px #ffaa33); }
        .burj:active { transform:scale(1.3); filter:drop-shadow(0 0 30px #ff6600); }
        .burj svg { width:100%; height:auto; }
        .click-counter { font-size:1.2rem; color:#ffaa33; }
        .progress-bar { width:100%; height:20px; background:#333; border-radius:10px; margin:20px 0; overflow:hidden; }
        .progress-fill { height:100%; width:0%; background:linear-gradient(90deg,#ffaa33,#ff6600); transition:width 0.3s; }
        .game-message { color:#ff6600; font-size:1.2rem; min-height:2rem; }

        .link { color:#ff6600; text-decoration:none; font-weight:600; font-size:1.3rem; border-bottom:2px solid transparent; transition:border-color 0.2s; }
        .link:hover { border-bottom-color:#ff6600; }
        .toast { position:fixed; bottom:30px; left:50%; transform:translateX(-50%); background:#222; color:#ff6600; padding:14px 28px; border-radius:60px; font-weight:600; box-shadow:0 10px 30px rgba(255,102,0,0.7); border:1px solid #ff6600; z-index:9999; opacity:0; transition:opacity 0.3s; pointer-events:none; white-space:nowrap; backdrop-filter:blur(5px); }
        .toast.show { opacity:1; }
        h2 { font-size:2rem; margin-bottom:15px; font-weight:500; color:#ff6600; }
        p { color:#ccc; line-height:1.6; }

        .scene-overlay { position:fixed; top:0; left:0; width:100%; height:100%; background:#000; z-index:20000; display:none; justify-content:center; align-items:center; }
        .scene-overlay.active { display:flex; }
        #scene-canvas { width:100%; height:100%; display:block; }
        .close-scene { position:absolute; top:25px; right:35px; color:white; font-size:50px; cursor:pointer; z-index:20001; transition:color 0.2s,transform 0.2s; }
        .close-scene:hover { color:#ff6600; transform:scale(1.2); }

        .copyright {
            text-align: center;
            margin: 40px 0 0;
            padding: 20px 0 0;
            color: #888;
            font-size: 14px;
            border-top: 1px solid #333;
        }
        @media (max-width: 600px) {
            .copyright {
                font-size: 12px;
                margin: 30px 0 0;
                padding: 15px 0 0;
            }
        }
    </style>
</head>
<body>
    <!-- –ü–ª–∞–≤–∞—é—â–∏–µ –∏–∫–æ–Ω–∫–∏ (18 —à—Ç—É–∫) -->
    <div class="floating-icons">
        <i class="icon icon1 fa-solid fa-gamepad" data-name="–î–∂–æ–π—Å—Ç–∏–∫"></i>
        <i class="icon icon2 fa-solid fa-computer-mouse" data-name="–ú—ã—à—å"></i>
        <i class="icon icon3 fa-solid fa-keyboard" data-name="–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞"></i>
        <i class="icon icon4 fa-solid fa-headphones" data-name="–ù–∞—É—à–Ω–∏–∫–∏"></i>
        <i class="icon icon5 fa-solid fa-display" data-name="–ú–æ–Ω–∏—Ç–æ—Ä"></i>
        <i class="icon icon6 fa-solid fa-floppy-disk" data-name="–î–∏—Å–∫–µ—Ç–∞"></i>
        <i class="icon icon7 fa-solid fa-compact-disc" data-name="CD"></i>
        <i class="icon icon8 fa-solid fa-camera" data-name="–ö–∞–º–µ—Ä–∞"></i>
        <i class="icon icon9 fa-solid fa-microchip" data-name="–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä"></i>
        <i class="icon icon10 fa-solid fa-wifi" data-name="Wi-Fi"></i>
        <i class="icon icon11 fa-solid fa-bolt" data-name="–ú–æ–ª–Ω–∏—è"></i>
        <i class="icon icon12 fa-solid fa-crown" data-name="–ö–æ—Ä–æ–Ω–∞"></i>
        <i class="icon icon13 fa-solid fa-cloud" data-name="–û–±–ª–∞–∫–æ"></i>
        <i class="icon icon14 fa-solid fa-tree" data-name="–î–µ—Ä–µ–≤–æ"></i>
        <i class="icon icon15 fa-solid fa-cat" data-name="–ö–æ—Ç"></i>
        <i class="icon icon16 fa-solid fa-moon" data-name="–õ—É–Ω–∞"></i>
        <i class="icon icon17 fa-solid fa-star" data-name="–ó–≤–µ–∑–¥–∞"></i>
        <i class="icon icon18 fa-solid fa-sun" data-name="–°–æ–ª–Ω—Ü–µ"></i>
    </div>

    <div id="toast" class="toast"></div>

    <div class="container">
        <div class="fullscreen-btn" onclick="toggleFullscreen()">
            <i class="fa-solid fa-expand"></i>
        </div>

        <!-- –®–ê–ü–ö–ê -->
        <div class="header">
            <img src="{{ url_for('static', filename='comilank.jpg') }}" alt="Comilank" class="avatar">
            <div class="title">
                <h1>
                    <span>C</span><span>O</span><span>M</span><span>I</span><span>L</span><span>A</span><span>N</span><span>K</span>
                </h1>
                <p>
                    <span>—Å</span><span>—Ç</span><span>—Ä</span><span>–∏</span><span>–º</span><span>–µ</span><span>—Ä</span>
                    <span> / </span>
                    <span>–≥</span><span>–µ</span><span>–π</span><span>–º</span><span>–µ</span><span>—Ä</span>
                    <span> / </span>
                    <span>–ø</span><span>—Ä</span><span>–æ</span><span>—Å</span><span>—Ç</span><span>–æ</span>
                    <span> </span>
                    <span>—Ö</span><span>–æ</span><span>—Ä</span><span>–æ</span><span>—à</span><span>–∏</span><span>–π</span>
                    <span> </span>
                    <span>—á</span><span>–µ</span><span>–ª</span><span>–æ</span><span>–≤</span><span>–µ</span><span>–∫</span>
                </p>
            </div>
            <div class="live-indicator" id="liveIndicator">
                <span class="live-dot"></span>
                <span class="live-text">LIVE</span>
            </div>
        </div>

        <!-- –í–ö–õ–ê–î–ö–ò -->
        <div class="tabs">
            <button class="tab-button active" onclick="openTab(event, 'main')">–ì–ª–∞–≤–Ω–∞—è</button>
            <button class="tab-button" onclick="openTab(event, 'games')">–ò–≥—Ä—ã</button>
            <button class="tab-button" onclick="openTab(event, 'channels')">–ú–æ–∏ –∫–∞–Ω–∞–ª—ã</button>
            <button class="tab-button" onclick="openTab(event, 'weather')">–ü–æ–≥–æ–¥–∞</button>
            <button class="tab-button" onclick="openTab(event, 'donate')">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å</button>
            <button class="tab-button" onclick="openTab(event, 'contacts')">–ö–æ–Ω—Ç–∞–∫—Ç—ã</button>
        </div>

        <!-- –ì–õ–ê–í–ù–ê–Ø -->
        <div id="main" class="tab-content active">
            <h2>–ü—Ä–∏–≤–µ—Ç, —è Comilank!</h2>
            <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –°—Ç—Ä–∏–º–ª—é –Ω–∞ YouTube/Twitch/TikTok –ø–æ–¥—Ä–æ–±–Ω–µ–µ –∏—â–∏ –≤–æ –≤–∫–ª–∞–¥–∫–µ <strong>–ú–æ–∏ –∫–∞–Ω–∞–ª—ã</strong>.</p>
            <div id="viewerBlock" style="display: none;">
                <div class="viewer-counter">
                    *–°–µ–π—á–∞—Å –∏–¥–µ—Ç –ø—Ä—è–º–∞—è —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è –Ω–∞ YouTube Shorts - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑—Ä–∏—Ç–µ–ª–µ–π <span id="viewerCount">0</span>*
                </div>
            </div>
            <div class="stream-timer" id="streamTimer">
                –î–æ –±–ª–∏–∂–∞–π—à–µ–≥–æ —Å—Ç—Ä–∏–º–∞: <span>--:--:--</span>
            </div>
        </div>

        <!-- –ò–ì–†–´ (–±–∞—Ä–∞–±–∞–Ω) -->
        <div id="games" class="tab-content">
            <h2>–í–æ —á—Ç–æ –∏–≥—Ä–∞—é</h2>
            <p>–ù–∞–∂–º–∏ ¬´–ö—Ä—É—Ç–∏—Ç—å¬ª, —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–∞—Ä–∞–±–∞–Ω.</p>
            <div class="spinning-reel">
                <div class="reel-indicator"></div>
                <div class="reel-track" id="reelTrack">
                    <!-- 16 –∏–≥—Ä + 2 –¥—É–±–ª–∏–∫–∞—Ç–∞ (–≤—Å–µ–≥–æ 48 —ç–ª–µ–º–µ–Ω—Ç–æ–≤) -->
                    <div class="reel-item">üî´ Red Dead 2</div>
                    <div class="reel-item">üî• Fahrenheit</div>
                    <div class="reel-item">‚öîÔ∏è Dota 2</div>
                    <div class="reel-item">‚ö° God of War</div>
                    <div class="reel-item">üìù Alan Wake</div>
                    <div class="reel-item">üå≤ Alan Wake 2</div>
                    <div class="reel-item">üíß Heavy Rain</div>
                    <div class="reel-item">üß© –¢–µ—Ç—Ä–∏—Å</div>
                    <div class="reel-item">üé≠ Detroit</div>
                    <div class="reel-item">üê¥ Red Dead 1</div>
                    <div class="reel-item">üöó GTA V</div>
                    <div class="reel-item">üåü Star Wars</div>
                    <div class="reel-item">üî´ Mafia II</div>
                    <div class="reel-item">üî´ Mafia 1</div>
                    <div class="reel-item">üî´ Mafia 3</div>
                    <div class="reel-item">üï∏Ô∏è Spider-Man</div>
                    <!-- –î—É–±–ª–∏–∫–∞—Ç—ã -->
                    <div class="reel-item">üî´ Red Dead 2</div>
                    <div class="reel-item">üî• Fahrenheit</div>
                    <div class="reel-item">‚öîÔ∏è Dota 2</div>
                    <div class="reel-item">‚ö° God of War</div>
                    <div class="reel-item">üìù Alan Wake</div>
                    <div class="reel-item">üå≤ Alan Wake 2</div>
                    <div class="reel-item">üíß Heavy Rain</div>
                    <div class="reel-item">üß© –¢–µ—Ç—Ä–∏—Å</div>
                    <div class="reel-item">üé≠ Detroit</div>
                    <div class="reel-item">üê¥ Red Dead 1</div>
                    <div class="reel-item">üöó GTA V</div>
                    <div class="reel-item">üåü Star Wars</div>
                    <div class="reel-item">üî´ Mafia II</div>
                    <div class="reel-item">üî´ Mafia 1</div>
                    <div class="reel-item">üî´ Mafia 3</div>
                    <div class="reel-item">üï∏Ô∏è Spider-Man</div>
                    <!-- –ï—â—ë –æ–¥–∏–Ω –¥—É–±–ª–∏–∫–∞—Ç -->
                    <div class="reel-item">üî´ Red Dead 2</div>
                    <div class="reel-item">üî• Fahrenheit</div>
                    <div class="reel-item">‚öîÔ∏è Dota 2</div>
                    <div class="reel-item">‚ö° God of War</div>
                    <div class="reel-item">üìù Alan Wake</div>
                    <div class="reel-item">üå≤ Alan Wake 2</div>
                    <div class="reel-item">üíß Heavy Rain</div>
                    <div class="reel-item">üß© –¢–µ—Ç—Ä–∏—Å</div>
                    <div class="reel-item">üé≠ Detroit</div>
                    <div class="reel-item">üê¥ Red Dead 1</div>
                    <div class="reel-item">üöó GTA V</div>
                    <div class="reel-item">üåü Star Wars</div>
                    <div class="reel-item">üî´ Mafia II</div>
                    <div class="reel-item">üî´ Mafia 1</div>
                    <div class="reel-item">üî´ Mafia 3</div>
                    <div class="reel-item">üï∏Ô∏è Spider-Man</div>
                </div>
            </div>
            <div class="reel-control">
                <button class="reel-btn" id="spinButton" onclick="startSpin()">üé∞ –ö—Ä—É—Ç–∏—Ç—å</button>
            </div>

            <!-- –ë–ª–æ–∫ —É–≥–∞–¥—ã–≤–∞–Ω–∏—è -->
            <div class="guess-section">
                <div class="guess-title">üëá –£–≥–∞–¥–∞–π, –∫–∞–∫–∞—è –∏–≥—Ä–∞ –≤—ã–ø–∞–¥–µ—Ç:</div>
                <div class="guess-buttons" id="guessButtons"></div>
            </div>
        </div>

        <!-- –ú–û–ò –ö–ê–ù–ê–õ–´ -->
        <div id="channels" class="tab-content">
            <h2>–ú–æ–∏ –∫–∞–Ω–∞–ª—ã</h2>
            <p><strong>–°—Ç—Ä–∏–º–ª—é –∫–∞–∂–¥—ã–µ –≤—ã—Ö–æ–¥–Ω—ã–µ!</strong></p>
            <p>–ú–æ–π YouTube –∫–∞–Ω–∞–ª:</p>
            <a href="https://youtube.com/@comilank?si=A4-MS3iTgWJbvUdq" target="_blank" class="link">youtube.com/@comilank</a>
            <p>–ú–æ–π Telegram –∫–∞–Ω–∞–ª:</p>
            <a href="https://t.me/Comilank" target="_blank" class="link">t.me/Comilank</a>
        </div>

        <!-- –ü–û–ì–û–î–ê -->
        <div id="weather" class="tab-content">
            <h2>–ü–æ–≥–æ–¥–∞ –≤ –≥–æ—Ä–æ–¥–∞—Ö</h2>
            <div class="weather-container" id="weatherContainer"></div>
        </div>

        <!-- –ü–û–î–î–ï–†–ñ–ê–¢–¨ –î–û–ù–ê–¢–û–ú -->
        <div id="donate" class="tab-content">
            <h2>–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å —Å—Ç—Ä–∏–º–µ—Ä–∞</h2>
            <div class="donate-container">
                <div class="donate-links">
                    <div class="donate-card">
                        <i class="fab fa-donationalerts"></i>
                        <a href="https://www.donationalerts.com/r/comilank" target="_blank">DonationAlerts</a>
                        <div class="donate-desc">–ù–∞ –ø–æ–∫—É–ø–∫—É –∏–≥—Ä, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã —è –ø—Ä–æ—à—ë–ª</div>
                    </div>
                    <div class="donate-card">
                        <i class="fas fa-donate"></i>
                        <a href="https://donatepay.ru/don/Comilank" target="_blank">Donatepay</a>
                        <div class="donate-desc">–ù–∞ —Ä–∞–∑–≤–∏—Ç–∏–µ –∫–∞–Ω–∞–ª–∞ –∏ –Ω–æ–≤—ã–µ –ø—Ä–æ–µ–∫—Ç—ã</div>
                    </div>
                </div>
                <!-- –ú–∏–Ω–∏-–∏–≥—Ä–∞ -->
                <div class="game-container">
                    <div class="game-title">üèóÔ∏è –ü–æ—Å—Ç—Ä–æ–π –ë—É—Ä–∂-–•–∞–ª–∏—Ñ üèóÔ∏è</div>
                    <div class="burj" id="burjClick">
                        <svg width="80" height="120" viewBox="0 0 100 200">
                            <rect x="30" y="150" width="40" height="40" fill="#ff6600" rx="5" />
                            <rect x="35" y="110" width="30" height="40" fill="#ff9933" rx="5" />
                            <rect x="40" y="70" width="20" height="40" fill="#ffaa33" rx="5" />
                            <rect x="45" y="30" width="10" height="40" fill="#ffcc66" rx="3" />
                            <circle cx="50" cy="20" r="8" fill="#ffff99" />
                        </svg>
                    </div>
                    <div class="click-counter">–ö–ª–∏–∫–æ–≤: <span id="clickCount">0</span></div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="game-message" id="gameMessage">–ö–ª–∏–∫–Ω–∏ –Ω–∞ –±–∞—à–Ω—é, —á—Ç–æ–±—ã –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å!</div>
                </div>
            </div>
        </div>

        <!-- –ö–û–ù–¢–ê–ö–¢–´ -->
        <div id="contacts" class="tab-content">
            <h2>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
            <p>–°–∫–æ—Ä–æ –ø–æ—è–≤—è—Ç—Å—è üôÉ</p>
        </div>

        <!-- –ö–û–ü–ò–†–ê–ô–¢ -->
        <div class="copyright">
            ¬© 2026 Comilank. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
        </div>
    </div>

    <!-- OVERLAY –î–õ–Ø 3D-–°–¶–ï–ù -->
    <div id="sceneOverlay" class="scene-overlay">
        <div class="close-scene" onclick="closeScene()">&times;</div>
        <canvas id="scene-canvas"></canvas>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫ (—á–µ—Ä–µ–∑ CDN) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ Three.js (–ø–æ—Å—Ç-–æ–±—Ä–∞–±–æ—Ç–∫–∞) -->
    <script src="https://unpkg.com/three@0.128.0/examples/js/postprocessing/EffectComposer.js"></script>
    <script src="https://unpkg.com/three@0.128.0/examples/js/postprocessing/RenderPass.js"></script>
    <script src="https://unpkg.com/three@0.128.0/examples/js/postprocessing/UnrealBloomPass.js"></script>

    <!-- –í–∞—à–∏ —Å–∫—Ä–∏–ø—Ç—ã (—É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ) -->
    <script src="/src/three-scenes/weather-scene.js"></script>
    <script src="/src/weather-icons/weather-icons.js"></script>

    <script>
        // ========== –ü–û–õ–ù–´–ô –≠–ö–†–ê–ù ==========
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }

        // ========== –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –í–ö–õ–ê–î–û–ö ==========
        function openTab(evt, tabName) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            evt.currentTarget.classList.add('active');
        }

        // ========== –ó–†–ò–¢–ï–õ–ò YouTube ==========
        function fetchYouTubeViewers() {
            fetch('/youtube-viewers')
                .then(r => r.json())
                .then(data => {
                    const live = data.live;
                    const viewers = data.viewers;
                    const indicator = document.getElementById('liveIndicator');
                    const viewerBlock = document.getElementById('viewerBlock');
                    const viewerCount = document.getElementById('viewerCount');
                    if (live) {
                        indicator.classList.add('live-on');
                        indicator.classList.remove('live-off');
                        viewerBlock.style.display = 'block';
                        viewerCount.textContent = viewers;
                    } else {
                        indicator.classList.add('live-off');
                        indicator.classList.remove('live-on');
                        viewerBlock.style.display = 'none';
                    }
                })
                .catch(() => console.log('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑—Ä–∏—Ç–µ–ª–µ–π'));
        }
        fetchYouTubeViewers();
        setInterval(fetchYouTubeViewers, 30000);

        // ========== –¢–ê–ô–ú–ï–† –î–û –°–¢–†–ò–ú–ê (9:30) ==========
        function updateStreamTimer() {
            const now = new Date();
            const target = new Date();
            target.setHours(9, 30, 0, 0);
            if (now > target) {
                target.setDate(target.getDate() + 1);
            }
            const diff = target - now;
            const hours = Math.floor(diff / 3600000);
            const minutes = Math.floor((diff % 3600000) / 60000);
            const seconds = Math.floor((diff % 60000) / 1000);
            document.querySelector('#streamTimer span').textContent = 
                `${hours.toString().padStart(2,'0')}:${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;
        }
        setInterval(updateStreamTimer, 1000);
        updateStreamTimer();

        // ========== –ë–ê–†–ê–ë–ê–ù ==========
        const reelTrack = document.getElementById('reelTrack');
        const spinButton = document.getElementById('spinButton');
        let spinTimer;
        const gameNames = [
            'Red Dead 2', 'Fahrenheit', 'Dota 2', 'God of War', 'Alan Wake', 'Alan Wake 2', 'Heavy Rain', '–¢–µ—Ç—Ä–∏—Å',
            'Detroit', 'Red Dead 1', 'GTA V', 'Star Wars', 'Mafia II', 'Mafia 1', 'Mafia 3', 'Spider-Man'
        ];
        const itemHeight = 70;
        const totalItems = 48; // 16 –∏–≥—Ä * 3 –ø–æ–≤—Ç–æ—Ä–∞

        // –î–ª—è —É–≥–∞–¥—ã–≤–∞–Ω–∏—è
        let selectedGuessIndex = null;

        // –°–æ–∑–¥–∞—ë–º –∫–Ω–æ–ø–∫–∏ —É–≥–∞–¥—ã–≤–∞–Ω–∏—è
        function initGuessButtons() {
            const container = document.getElementById('guessButtons');
            container.innerHTML = '';
            gameNames.forEach((name, idx) => {
                const btn = document.createElement('button');
                btn.className = 'guess-btn';
                btn.textContent = name;
                btn.dataset.index = idx;
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.guess-btn').forEach(b => b.classList.remove('selected'));
                    btn.classList.add('selected');
                    selectedGuessIndex = idx;
                });
                container.appendChild(btn);
            });
        }
        initGuessButtons();

        function startIdleSpin() {
            reelTrack.style.transition = 'none';
            reelTrack.style.animation = 'spinDown 30s linear infinite';
        }
        startIdleSpin();

        function startSpin() {
            if (spinButton.disabled) return;
            document.querySelectorAll('.reel-item').forEach(el => el.classList.remove('selected'));

            reelTrack.style.animation = 'none';
            const style = window.getComputedStyle(reelTrack);
            let currentY = 0;
            const matrix = style.transform;
            if (matrix && matrix !== 'none') {
                const match = matrix.match(/matrix.*\((.+)\)/);
                if (match) {
                    const parts = match[1].split(', ');
                    if (parts.length === 6) currentY = parseFloat(parts[5]);
                }
            }
            reelTrack.style.transform = `translate3d(0, ${currentY}px, 0)`;
            reelTrack.style.animation = 'spinDown 1s linear infinite';
            spinButton.disabled = true;
            clearTimeout(spinTimer);
            spinTimer = setTimeout(stopSpin, 5000);
        }

        function stopSpin() {
            reelTrack.style.animation = 'none';
            const style = window.getComputedStyle(reelTrack);
            let currentY = 0;
            const matrix = style.transform;
            if (matrix && matrix !== 'none') {
                const match = matrix.match(/matrix.*\((.+)\)/);
                if (match) {
                    const parts = match[1].split(', ');
                    if (parts.length === 6) currentY = parseFloat(parts[5]);
                }
            }

            const viewportCenter = 105;
            const trackCenter = viewportCenter - currentY;
            const randomUnique = Math.floor(Math.random() * 16);

            let bestIndex = 0;
            let minDist = Infinity;
            for (let i = 0; i < totalItems; i++) {
                if (i % 16 === randomUnique) {
                    const elemCenter = i * itemHeight + itemHeight / 2;
                    const dist = Math.abs(elemCenter - trackCenter);
                    if (dist < minDist) {
                        minDist = dist;
                        bestIndex = i;
                    }
                }
            }

            const targetY = Math.round(viewportCenter - (bestIndex * itemHeight + itemHeight / 2));
            reelTrack.style.transition = 'transform 0.4s cubic-bezier(0.2, 0.9, 0.3, 1.2)';
            reelTrack.style.transform = `translate3d(0, ${targetY}px, 0)`;

            document.querySelectorAll('.reel-item').forEach((el, idx) => {
                if (idx === bestIndex) el.classList.add('selected');
                else el.classList.remove('selected');
            });

            const gameName = gameNames[randomUnique];
            showToast(`üé∞ –í—ã–ø–∞–ª–æ: ${gameName}`);

            if (selectedGuessIndex !== null && selectedGuessIndex === randomUnique) {
                showCharacterCongrats(randomUnique);
                selectedGuessIndex = null;
                document.querySelectorAll('.guess-btn').forEach(b => b.classList.remove('selected'));
            }

            spinButton.disabled = false;
        }

        // ========== –ê–ù–ò–ú–ò–†–û–í–ê–ù–ù–´–ï –ü–ï–†–°–û–ù–ê–ñ–ò (–£–õ–£–ß–®–ï–ù–ù–´–ï) ==========
        function showCharacterCongrats(gameIndex) {
            const overlay = document.createElement('div');
            overlay.className = 'congrats-overlay';

            const canvas = document.createElement('canvas');
            canvas.width = 400;
            canvas.height = 400;
            canvas.className = 'congrats-canvas';
            const ctx = canvas.getContext('2d');

            const textDiv = document.createElement('div');
            textDiv.className = 'congrats-text';

            const gamesData = [
                { char: 'rdr', msg: 'ü§† –ú–æ–ª–æ–¥–µ—Ü, –∫–æ–≤–±–æ–π!', color1: '#cc5500', color2: '#993300' },
                { char: 'fahrenheit', msg: 'Fahrenheit! –¢–∞–π–Ω–∞ —Ä–∞—Å–∫—Ä—ã—Ç–∞!', color1: '#b85e00', color2: '#8a4500' },
                { char: 'dota2', msg: '‚öîÔ∏è GG WP! –ö–µ—Ä—Ä–∏ –¥–æ–≤–æ–ª–µ–Ω!', color1: '#aa5a00', color2: '#874400' },
                { char: 'gow', msg: '‚ö° –ö—Ä–∞—Ç–æ—Å –æ–¥–æ–±—Ä—è–µ—Ç!', color1: '#c65a00', color2: '#9b4600' },
                { char: 'alanwake', msg: 'üìù –°–≤–µ—Ç –≤–æ —Ç—å–º–µ!', color1: '#bf6000', color2: '#964b00' },
                { char: 'alanwake2', msg: 'üå≤ –¢—å–º–∞ –æ—Ç—Å—Ç—É–ø–∞–µ—Ç!', color1: '#b36200', color2: '#8e4d00' },
                { char: 'heavyrain', msg: 'üíß –ü–æ–¥ –¥–æ–∂–¥—ë–º!', color1: '#b25e00', color2: '#8e4800' },
                { char: 'tetris', msg: 'üß© –¢–µ–±–µ –ø—Ä–æ—Å—Ç–æ –ø–æ–≤–µ–∑–ª–æ!', color1: '#c46400', color2: '#9b4d00' },
                { char: 'detroit', msg: 'üé≠ –°—Ç–∞–Ω—å —á–µ–ª–æ–≤–µ–∫–æ–º!', color1: '#cc5c00', color2: '#a04700' },
                { char: 'rdr', msg: 'ü§† –ú–æ–ª–æ–¥–µ—Ü, –∫–æ–≤–±–æ–π!', color1: '#cc5500', color2: '#993300' },
                { char: 'gtav', msg: 'üöó –î–µ–Ω—å–≥–∏, —Å–ª–∞–≤–∞!', color1: '#c46200', color2: '#994b00' },
                { char: 'starwars', msg: 'üåü –î–∞ –ø—Ä–µ–±—É–¥–µ—Ç —Å —Ç–æ–±–æ–π —Å–∏–ª–∞!', color1: '#b85f00', color2: '#8f4900' },
                { char: 'mafia', msg: 'üî´ –£–≤–∞–∂–µ–Ω–∏–µ —Å–µ–º—å–∏!', color1: '#aa5a00', color2: '#874400' },
                { char: 'mafia', msg: 'üî´ –£–≤–∞–∂–µ–Ω–∏–µ —Å–µ–º—å–∏!', color1: '#aa5a00', color2: '#874400' },
                { char: 'mafia', msg: 'üî´ –£–≤–∞–∂–µ–Ω–∏–µ —Å–µ–º—å–∏!', color1: '#aa5a00', color2: '#874400' },
                { char: 'spiderman', msg: 'üï∏Ô∏è –° –≤–µ–ª–∏–∫–æ–π —Å–∏–ª–æ–π...', color1: '#cc5e00', color2: '#a04900' }
            ];
            const data = gamesData[gameIndex];
            const character = data.char;
            const message = data.msg;
            const color1 = data.color1;
            const color2 = data.color2;
            textDiv.innerHTML = message;

            function drawCharacter(time) {
                ctx.clearRect(0, 0, 400, 400);
                ctx.shadowColor = '#ff6600';
                ctx.shadowBlur = 25;
                ctx.fillStyle = color1;
                ctx.strokeStyle = color2;
                ctx.lineWidth = 3;
                ctx.shadowBlur = 30;

                switch (character) {
                    case 'rdr':
                        // –ö–æ–≤–±–æ–π —Å —Ä–µ–≤–æ–ª—å–≤–µ—Ä–æ–º
                        ctx.fillStyle = color1;
                        ctx.fillRect(150, 150, 100, 150);
                        ctx.beginPath();
                        ctx.arc(200, 120, 40, 0, Math.PI*2);
                        ctx.fill();
                        ctx.fillStyle = color2;
                        ctx.fillRect(160, 70, 80, 15);
                        ctx.fillRect(180, 35, 40, 40);
                        ctx.fillStyle = '#884422';
                        ctx.fillRect(260, 190, 50, 15);
                        ctx.beginPath();
                        ctx.arc(310, 197, 10, 0, Math.PI*2);
                        ctx.fill();
                        if (Math.sin(time*0.02) > 0) {
                            ctx.fillStyle = '#ffaa33';
                            ctx.beginPath();
                            ctx.arc(330, 197, 20, 0, Math.PI*2);
                            ctx.fill();
                        }
                        break;

                    case 'fahrenheit':
                        // –î–µ—Ç–µ–∫—Ç–∏–≤ —Å —Å–∏–≥–∞—Ä–µ—Ç–æ–π
                        ctx.fillStyle = color1;
                        ctx.fillRect(150, 150, 100, 150);
                        ctx.beginPath();
                        ctx.arc(200, 120, 40, 0, Math.PI*2);
                        ctx.fill();
                        ctx.fillStyle = color2;
                        ctx.fillRect(160, 70, 80, 15);
                        ctx.fillRect(180, 35, 40, 40);
                        ctx.fillStyle = '#b87333';
                        ctx.fillRect(240, 110, 40, 10);
                        ctx.fillStyle = '#aaa';
                        ctx.beginPath();
                        ctx.arc(260 + Math.sin(time*0.02)*5, 90, 10, 0, Math.PI*2);
                        ctx.arc(270 + Math.cos(time*0.03)*5, 70, 8, 0, Math.PI*2);
                        ctx.fill();
                        break;

                    case 'dota2':
                        // –†—ã—Ü–∞—Ä—å —Å –º–µ—á–æ–º
                        ctx.fillStyle = color1;
                        ctx.fillRect(150, 150, 100, 150);
                        ctx.beginPath();
                        ctx.arc(200, 120, 40, 0, Math.PI*2);
                        ctx.fill();
                        ctx.fillStyle = color2;
                        ctx.fillRect(160, 70, 80, 15);
                        ctx.fillStyle = '#ffaa33';
                        ctx.save();
                        ctx.translate(265, 160);
                        ctx.rotate(Math.sin(time*0.02)*0.2);
                        ctx.fillRect(-5, -40, 10, 80);
                        ctx.restore();
                        break;

                    case 'gow':
                        // –ö—Ä–∞—Ç–æ—Å —Å —Ç–æ–ø–æ—Ä–æ–º
                        ctx.fillStyle = color1;
                        ctx.fillRect(150, 150, 100, 150);
                        ctx.beginPath();
                        ctx.arc(200, 120, 40, 0, Math.PI*2);
                        ctx.fill();
                        ctx.fillStyle = color2;
                        ctx.fillRect(260, 100, 20, 80);
                        ctx.beginPath();
                        ctx.moveTo(280, 100);
                        ctx.lineTo(320, 80);
                        ctx.lineTo(320, 120);
                        ctx.closePath();
                        ctx.fill();
                        break;

                    case 'alanwake':
                    case 'alanwake2':
                        // –ü–∏—Å–∞—Ç–µ–ª—å —Å —Ñ–æ–Ω–∞—Ä–∏–∫–æ–º
                        ctx.fillStyle = color1;
                        ctx.fillRect(150, 150, 100, 150);
                        ctx.beginPath();
                        ctx.arc(200, 120, 40, 0, Math.PI*2);
                        ctx.fill();
                        ctx.fillStyle = '#ffaa33';
                        ctx.fillRect(260, 150, 30, 20);
                        ctx.strokeStyle = '#ffaa33';
                        ctx.lineWidth = 3;
                        ctx.beginPath();
                        ctx.moveTo(290, 160);
                        ctx.lineTo(350, 120 + Math.sin(time*0.01)*20);
                        ctx.stroke();
                        break;

                    case 'heavyrain':
                        // –§–∏–≥—É—Ä–∫–∞ –ø–æ–¥ –¥–æ–∂–¥—ë–º
                        ctx.fillStyle = color1;
                        ctx.fillRect(150, 150, 100, 150);
                        ctx.beginPath();
                        ctx.arc(200, 120, 40, 0, Math.PI*2);
                        ctx.fill();
                        ctx.fillStyle = '#88aaff';
                        for (let i=0; i<8; i++) {
                            let x = 100 + i*40 + Math.sin(time*0.02 + i)*5;
                            let y = 200 + i*20 - time*0.5 % 200;
                            ctx.beginPath();
                            ctx.ellipse(x, y, 5, 10, 0, 0, Math.PI*2);
                            ctx.fill();
                        }
                        break;

                    case 'tetris':
                        // –ü–∏–∫—Å–µ–ª—å–Ω—ã–π —á–µ–ª–æ–≤–µ—á–µ–∫ –∏–∑ –∫—É–±–∏–∫–æ–≤
                        let offset = Math.floor(time*0.02) % 4;
                        ctx.fillStyle = color1;
                        for (let y=0; y<4; y++) {
                            for (let x=0; x<4; x++) {
                                if (offset === 0 && y===2 && x===2) continue;
                                ctx.fillRect(100 + x*50, 100 + y*50, 40, 40);
                            }
                        }
                        ctx.fillStyle = '#ffaa33';
                        ctx.beginPath();
                        ctx.arc(300 + Math.sin(time*0.05)*50, 150 + Math.cos(time*0.03)*30, 20, 0, Math.PI*2);
                        ctx.fill();
                        break;

                    case 'detroit':
                        // –ê–Ω–¥—Ä–æ–∏–¥ —Å LED
                        ctx.fillStyle = color1;
                        ctx.fillRect(150, 150, 100, 150);
                        ctx.beginPath();
                        ctx.arc(200, 120, 40, 0, Math.PI*2);
                        ctx.fill();
                        ctx.fillStyle = '#ff0000';
                        ctx.beginPath();
                        ctx.arc(180, 100, 5, 0, Math.PI*2);
                        ctx.fill();
                        ctx.fillStyle = '#00ff00';
                        if (Math.sin(time*0.01) > 0) ctx.fill();
                        break;

                    case 'gtav':
                        // –°–∏–ª—É—ç—Ç —Å –¥–µ–Ω—å–≥–∞–º–∏
                        ctx.fillStyle = color1;
                        ctx.fillRect(150, 150, 100, 150);
                        ctx.beginPath();
                        ctx.arc(200, 120, 40, 0, Math.PI*2);
                        ctx.fill();
                        ctx.fillStyle = '#22aa22';
                        for (let i=0; i<5; i++) {
                            ctx.fillRect(180 + i*15, 80 + Math.sin(time*0.02 + i)*5, 10, 20);
                        }
                        break;

                    case 'starwars':
                        // –®—Ç—É—Ä–º–æ–≤–∏–∫ —Å –±–ª–∞—Å—Ç–µ—Ä–æ–º
                        ctx.fillStyle = color1;
                        ctx.fillRect(150, 150, 100, 150);
                        ctx.beginPath();
                        ctx.arc(200, 120, 40, 0, Math.PI*2);
                        ctx.fill();
                        ctx.fillStyle = color2;
                        ctx.fillRect(160, 70, 80, 15);
                        ctx.fillStyle = '#886644';
                        ctx.fillRect(260, 150, 40, 15);
                        if (Math.sin(time*0.03) > 0) {
                            ctx.fillStyle = '#ffaa33';
                            ctx.beginPath();
                            ctx.arc(300, 157, 10, 0, Math.PI*2);
                            ctx.fill();
                        }
                        break;

                    case 'mafia':
                        // –ú–∞—Ñ–∏–æ–∑–∏ —Å —Ç–æ–º–ø—Å–æ–Ω–æ–º
                        ctx.fillStyle = color1;
                        ctx.fillRect(150, 150, 100, 150);
                        ctx.beginPath();
                        ctx.arc(200, 120, 40, 0, Math.PI*2);
                        ctx.fill();
                        ctx.fillStyle = color2;
                        ctx.fillRect(160, 70, 80, 15);
                        ctx.fillRect(180, 35, 40, 40);
                        ctx.fillStyle = '#884422';
                        ctx.fillRect(250, 180, 80, 20);
                        ctx.fillRect(330, 170, 20, 40);
                        ctx.fillStyle = '#aaa';
                        ctx.beginPath();
                        ctx.arc(340, 190, 10 + Math.sin(time*0.02)*2, 0, Math.PI*2);
                        ctx.fill();
                        break;

                    case 'spiderman':
                        // –ß–µ–ª–æ–≤–µ–∫-–ø–∞—É–∫ –Ω–∞ –ø–∞—É—Ç–∏–Ω–µ
                        ctx.fillStyle = color1;
                        ctx.fillRect(150, 150, 100, 150);
                        ctx.beginPath();
                        ctx.arc(200, 120, 40, 0, Math.PI*2);
                        ctx.fill();
                        ctx.strokeStyle = color2;
                        ctx.lineWidth = 2;
                        for (let i=0; i<5; i++) {
                            let angle = i * 0.2 + time*0.005;
                            ctx.beginPath();
                            ctx.moveTo(200, 120);
                            ctx.lineTo(200 + Math.cos(angle)*100, 120 + Math.sin(angle)*100);
                            ctx.stroke();
                        }
                        break;

                    default:
                        ctx.fillStyle = color1;
                        ctx.beginPath();
                        ctx.arc(200, 200, 80, 0, Math.PI*2);
                        ctx.fill();
                        ctx.fillStyle = color2;
                        ctx.beginPath();
                        ctx.arc(150, 150, 20, 0, Math.PI*2);
                        ctx.arc(250, 150, 20, 0, Math.PI*2);
                        ctx.fill();
                }
            }

            let animFrame;
            let startTime = Date.now();
            function animate() {
                let elapsed = Date.now() - startTime;
                if (elapsed > 2000) {
                    overlay.remove();
                    cancelAnimationFrame(animFrame);
                    return;
                }
                drawCharacter(elapsed);
                animFrame = requestAnimationFrame(animate);
            }

            overlay.appendChild(canvas);
            overlay.appendChild(textDiv);
            document.body.appendChild(overlay);
            animate();

            setTimeout(() => {
                if (overlay.parentNode) overlay.remove();
                cancelAnimationFrame(animFrame);
            }, 2100);
        }

        // ========== –ü–û–ì–û–î–ê (–¥–∞–Ω–Ω—ã–µ —Å Open-Meteo) ==========
        const cities = [
            { name: '–î—É–±–∞–π', lat: 25.2048, lon: 55.2708, tz: 'Asia/Dubai' },
            { name: '–ú–æ—Å–∫–≤–∞', lat: 55.7558, lon: 37.6173, tz: 'Europe/Moscow' },
            { name: '–õ–æ–Ω–¥–æ–Ω', lat: 51.5074, lon: -0.1278, tz: 'Europe/London' },
            { name: '–ù—å—é-–ô–æ—Ä–∫', lat: 40.7128, lon: -74.0060, tz: 'America/New_York' },
            { name: '–¢–æ–∫–∏–æ', lat: 35.6895, lon: 139.6917, tz: 'Asia/Tokyo' },
            { name: '–°–∏–¥–Ω–µ–π', lat: -33.8688, lon: 151.2093, tz: 'Australia/Sydney' },
            { name: '–†–∏–æ-–¥–µ-–ñ–∞–Ω–µ–π—Ä–æ', lat: -22.9068, lon: -43.1729, tz: 'America/Sao_Paulo' },
            { name: '–ö–µ–π–ø—Ç–∞—É–Ω', lat: -33.9249, lon: 18.4241, tz: 'Africa/Johannesburg' }
        ];

        function getWeatherIcon(code) {
            if (code === 0) return 'fa-sun';
            if ([1,2,3].includes(code)) return 'fa-cloud-sun';
            if ([45,48].includes(code)) return 'fa-smog';
            if ([51,53,55,56,57,61,63,65,66,67,80,81,82].includes(code)) return 'fa-cloud-rain';
            if ([71,73,75,77,85,86].includes(code)) return 'fa-snowflake';
            if ([95,96,99].includes(code)) return 'fa-cloud-bolt';
            return 'fa-cloud';
        }

        function getWeatherDescription(code) {
            if (code === 0) return '–Ø—Å–Ω–æ';
            if ([1,2,3].includes(code)) return '–û–±–ª–∞—á–Ω–æ';
            if ([45,48].includes(code)) return '–¢—É–º–∞–Ω';
            if ([51,53,55,56,57,61,63,65,66,67,80,81,82].includes(code)) return '–î–æ–∂–¥—å';
            if ([71,73,75,77,85,86].includes(code)) return '–°–Ω–µ–≥';
            if ([95,96,99].includes(code)) return '–ì—Ä–æ–∑–∞';
            return '–†–∞–∑–Ω–æ–µ';
        }

        function getWeatherType(code, temp) {
            if (code === 0) return 'sunny';
            if ([1,2,3].includes(code)) return 'cloudy';
            if ([45,48].includes(code)) return 'foggy';
            if ([51,53,55,56,57,61,63,65,66,67,80,81,82].includes(code)) return 'rainy';
            if ([71,73,75,77,85,86].includes(code)) return 'snowy';
            if ([95,96,99].includes(code)) return 'stormy';
            return 'cloudy';
        }

        async function fetchWeather() {
            const container = document.getElementById('weatherContainer');
            container.innerHTML = '–ó–∞–≥—Ä—É–∑–∫–∞...';
            try {
                const promises = cities.map(city => 
                    fetch(`https://api.open-meteo.com/v1/forecast?latitude=${city.lat}&longitude=${city.lon}&current_weather=true&timezone=${city.tz}`)
                        .then(res => res.json())
                        .then(data => ({
                            ...city,
                            temp: data.current_weather.temperature,
                            code: data.current_weather.weathercode,
                            time: data.current_weather.time
                        }))
                );
                const results = await Promise.all(promises);
                console.log('–ü–æ–≥–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:', results);
                container.innerHTML = results.map(city => `
                    <div class="weather-card" data-tz="${city.tz}" data-code="${city.code}" data-temp="${city.temp}" data-name="${city.name}">
                        <div class="weather-city">${city.name}</div>
                        <div class="weather-time">${new Date(city.time).toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit', timeZone: city.tz })}</div>
                        <i class="weather-icon fas ${getWeatherIcon(city.code)}"></i>
                        <div class="weather-temp">${city.temp}¬∞C</div>
                        <div class="weather-desc">${getWeatherDescription(city.code)}</div>
                    </div>
                `).join('');
                updateCityTimes();
                setInterval(updateCityTimes, 1000);
                document.querySelectorAll('.weather-card').forEach(card => {
                    card.addEventListener('click', () => {
                        const tz = card.dataset.tz;
                        const code = parseInt(card.dataset.code);
                        const temp = parseFloat(card.dataset.temp);
                        const cityName = card.dataset.name;
                        if (window.showWeatherScene) {
                            window.showWeatherScene(cityName, getWeatherType(code, temp), temp, tz);
                        } else {
                            console.error('–°–∫—Ä–∏–ø—Ç —Å—Ü–µ–Ω—ã –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
                        }
                    });
                });
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–≥–æ–¥—ã:', error);
                container.innerHTML = '<div class="weather-card">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–≥–æ–¥—ã</div>';
            }
        }

        function updateCityTimes() {
            document.querySelectorAll('.weather-card').forEach(card => {
                const tz = card.dataset.tz;
                const timeElement = card.querySelector('.weather-time');
                if (timeElement && tz) {
                    const now = new Date();
                    const timeStr = now.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit', timeZone: tz });
                    timeElement.textContent = timeStr;
                }
            });
        }

        // ========== –ú–ò–ù–ò-–ò–ì–†–ê ==========
        let clickCount = 0;
        const maxClicks = 50;
        const burj = document.getElementById('burjClick');
        const clickSpan = document.getElementById('clickCount');
        const progressFill = document.getElementById('progressFill');
        const gameMessage = document.getElementById('gameMessage');

        burj.addEventListener('click', () => {
            if (clickCount >= maxClicks) return;
            clickCount++;
            clickSpan.textContent = clickCount;
            progressFill.style.width = (clickCount / maxClicks * 100) + '%';
            burj.style.transform = 'scale(1.2)';
            burj.style.filter = 'drop-shadow(0 0 30px #ff6600)';
            setTimeout(() => {
                burj.style.transform = 'scale(1)';
                burj.style.filter = 'drop-shadow(0 0 10px #ffaa33)';
            }, 200);
            if (clickCount === maxClicks) {
                gameMessage.innerHTML = 'üéâ –°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É! üéâ';
                window.open('https://www.donationalerts.com/r/comilank', '_blank');
            } else {
                gameMessage.textContent = `–û—Å—Ç–∞–ª–æ—Å—å –∫–ª–∏–∫–æ–≤: ${maxClicks - clickCount}`;
            }
        });

        // ========== TOAST ==========
        const toast = document.getElementById('toast');
        function showToast(msg) {
            toast.textContent = msg;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2000);
        }

        document.querySelectorAll('.icon').forEach(icon => {
            icon.addEventListener('click', function() {
                showToast(`‚ú® ${this.getAttribute('data-name')}`);
            });
        });

        // ========== –ó–ê–ü–£–°–ö –ó–ê–ì–†–£–ó–ö–ò –ü–û–ì–û–î–´ ==========
        fetchWeather();
    </script>
</body>
</html>